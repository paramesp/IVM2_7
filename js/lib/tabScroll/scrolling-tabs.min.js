!function(){"use strict";function r(t){var e=this;e.stc=t}function o(t){var e=this;e.stc=t}function a(t){var e=this;e.stc=t}function s(t,e){var i=this;i.$tabsContainer=t,i.$timeout=e,i.movableContainerLeftPos=0,i.scrollArrowsVisible=!0,i.scrollToTabEdge=!1,i.scrollMovement=new a(i),i.eventHandlers=new r(i),i.elementsHandler=new o(i)}function l(t,e){function n(t){return e.trustAsHtml(t)}return{restrict:"E",template:i,transclude:!1,replace:!0,scope:{tabs:"@",watchTabs:"=",propPaneId:"@",propTitle:"@",propActive:"@",propDisabled:"@",localTabClick:"&tabClick"},link:function(e,i,r){var o=new s(i,t),a=r.scrollToTabEdge&&"true"===r.scrollToTabEdge.toLowerCase();return e.tabsArr=e.$eval(e.tabs),e.propPaneId=e.propPaneId||"paneId",e.propTitle=e.propTitle||"title",e.propActive=e.propActive||"active",e.propDisabled=e.propDisabled||"disabled",e.sanitize=n,i.on("click.scrollingTabs",".nav-tabs > li",function(t){var i=$(this).data();e.localTabClick({$event:t,$index:i.index,tab:i.tab})}),r.watchTabs?void e.$watch("watchTabs",function(n,r){var s,l;e.tabsArr=e.$eval(e.tabs),n.length&&n[n.length-1].active?t(function(){i.find("ul.nav-tabs > li:last").removeClass("active").find('a[role="tab"]').click()},0):(s=i.find(".nav-tabs > li.active"),s.length&&(l=s.data("index"),e.tabsArr.some(function(t){return t[e.propActive]?(t[e.propActive]=!1,!0):void 0}),e.tabsArr[l][e.propActive]=!0)),o.initTabs({isWrapperDirective:!1,isWatchingTabs:!0,scrollToTabEdge:a})},!0):void o.initTabs({isWrapperDirective:!1,scrollToTabEdge:a})}}}function c(t){return{restrict:"A",template:n,transclude:!0,replace:!0,link:function(e,i,n){function l(t){r.initTabs({isWrapperDirective:!0,isWrappingAngularUITabset:o,isWatchingTabs:!0,scrollToTabEdge:a,isWatchingDom:t&&t.isWatchingDom})}function c(){function a(){return r=n.find("li.active").index(),r!==o&&(o=r,l({isWatchingDom:!0})),!1}var r,o,n=i.find("ul.nav-tabs");n.length&&(e.$watch(function(){return n[0].childNodes.length},function(t,e){t!==e&&l({isWatchingDom:!0})}),e.$watch(function(){return t(a,0,!1),n.find("li.active").index()},angular.noop))}var r=new s(i,t),o=i.find("tabset, uib-tabset").length>0,a=n.scrollToTabEdge&&"true"===n.scrollToTabEdge.toLowerCase();return o||r.removeTranscludedTabContentOutsideMovableContainer(),n.watchTabs?"true"===n.watchTabs.toLowerCase()?(o&&r.removeTranscludedTabContentOutsideMovableContainer(),l(),void t(c,10)):void e.$watch(n.watchTabs,function(e,n){o||e.length&&e[e.length-1].active&&t(function(){i.find("ul.nav-tabs > li:last").removeClass("active").find('a[role="tab"]').click()},0),l()},!0):void r.initTabs({isWrapperDirective:!0,isWrappingAngularUITabset:o,scrollToTabEdge:a})}}}var t={CONTINUOUS_SCROLLING_TIMEOUT_INTERVAL:50,SCROLL_OFFSET_FRACTION:6,DATA_KEY_IS_MOUSEDOWN:"ismousedown"},e=angular.module("mj.scrollingTabs",[]),i=['<div class="scrtabs-tab-container">',' <div class="scrtabs-tab-scroll-arrow scrtabs-js-tab-scroll-arrow-left"><span class="tk-caret-left tk-font-24"></span></div>','   <div class="scrtabs-tabs-fixed-container">','     <div class="scrtabs-tabs-movable-container">','       <ul class="nav nav-tabs" role="tablist">',"         <li ng-class=\"{ 'active': tab[propActive || 'active'], ","                         'disabled': tab[propDisabled || 'disabled'] }\" ",'             data-tab="{{tab}}" data-index="{{$index}}" ng-repeat="tab in tabsArr">',"           <a ng-href=\"{{'#' + tab[propPaneId || 'paneId']}}\" role=\"tab\"","                data-toggle=\"{{tab[propDisabled || 'disabled'] ? '' : 'tab'}}\" ","                ng-bind-html=\"sanitize(tab[propTitle || 'title']);\">","           </a>","         </li>","       </ul>","     </div>"," </div>",' <div class="scrtabs-tab-scroll-arrow scrtabs-js-tab-scroll-arrow-right"><span class="tk-caret-right tk-font-24"></span></div>',"</div>"].join(""),n=['<div class="scrtabs-tab-container">',' <div class="scrtabs-tab-scroll-arrow scrtabs-js-tab-scroll-arrow-left"><span class="tk-caret-left tk-font-24"></span></div>','   <div class="scrtabs-tabs-fixed-container">','     <div class="scrtabs-tabs-movable-container" ng-transclude></div>',"   </div>",' <div class="scrtabs-tab-scroll-arrow scrtabs-js-tab-scroll-arrow-right"><span class="tk-caret-right tk-font-24"></span></div>',' <div class="scrtabs-tab-content-outside-movable-container" ng-transclude></div>',"</div>"].join("");!function(t,e){var i=function(t,e,i){var n;return function(){function a(){i||t.apply(r,o),n=null}var r=this,o=arguments;n?clearTimeout(n):i&&t.apply(r,o),n=setTimeout(a,e||100)}};jQuery.fn[e]=function(t){return t?this.bind("resize.scrtabs",i(t)):this.trigger(e)}}(jQuery,"smartresize"),function(t){t.handleClickOnLeftScrollArrow=function(t){var e=this,i=e.stc;i.scrollMovement.incrementScrollLeft()},t.handleClickOnRightScrollArrow=function(t){var e=this,i=e.stc,n=i.scrollMovement;n.incrementScrollRight(n.getMinPos())},t.handleMousedownOnLeftScrollArrow=function(t){var e=this,i=e.stc;i.scrollMovement.startScrollLeft()},t.handleMousedownOnRightScrollArrow=function(t){var e=this,i=e.stc;i.scrollMovement.startScrollRight()},t.handleMouseupOnLeftScrollArrow=function(t){var e=this,i=e.stc;i.scrollMovement.stopScrollLeft()},t.handleMouseupOnRightScrollArrow=function(t){var e=this,i=e.stc;i.scrollMovement.stopScrollRight()},t.handleWindowResize=function(t){var e=this,i=e.stc,n=i.$win.width();return n===i.winWidth?!1:(i.winWidth=n,void i.elementsHandler.refreshAllElementSizes())}}(r.prototype),function(t){t.isModalWindow=function(t){return t.parent().attr("id")&&t.parent().attr("id").indexOf("identifyTabs")>-1?!0:!1},t.isCurrentTabVisible=function(t,e){if(t&&e.attr("class")){var i=[];if(e.attr("class").indexOf(" ")>-1?i=e.attr("class").split(" "):i[0]=e.attr("class"),$.inArray("ng-hide",i)<0||$.inArray("ng-hide-remove",i)>-1)return!0}else if(!t&&e.attr("class").indexOf("ng-hide")<0)return!0;return!1},t.initElements=function(t){var e=this,i=e.stc;i.$tabsContainer;e.setElementReferences(),t.isWrappingAngularUITabset&&t.isWatchingDom&&e.moveTabContentOutsideScrollContainer(t),e.setEventListeners()},t.moveTabContentOutsideScrollContainer=function(t){var a,s,e=this,i=e.stc,n=i.$tabsContainer,r="scrtabs-tab-content-clone",o=n.find(".scrtabs-tabs-movable-container .tab-content");return t.isWatchingTabs?(s=o.clone().addClass(r),a=n.find("."+r),void(a.length?a.replaceWith(s):n.append(s))):void o.show().appendTo(n)},t.refreshAllElementSizes=function(){var o,t=this,e=t.stc,i=e.scrollMovement,n=e.scrollArrowsVisible,r={didScrollToActiveTab:!1};return t.setElementWidths(),t.setScrollArrowVisibility(),e.scrollArrowsVisible&&t.setFixedContainerWidthForJustVisibleScrollArrows(),(e.scrollArrowsVisible||n)&&(e.scrollArrowsVisible?(o=i.getMinPos(),e.movableContainerLeftPos<o?i.incrementScrollRight(o):(i.scrollToActiveTab({isOnWindowResize:!0}),r.didScrollToActiveTab=!0)):(e.movableContainerLeftPos=0,i.slideMovableContainerToLeftPos())),r},t.removeTranscludedTabContentOutsideMovableContainer=function(){var t=this,e=t.stc,i=e.$tabsContainer;i.find(".scrtabs-tab-content-outside-movable-container").remove()},t.setElementReferences=function(){var t=this,e=t.stc,i=e.$tabsContainer;e.isNavPills=!1,e.isModalWindow=t.isModalWindow(i),e.$fixedContainer=i.find(".scrtabs-tabs-fixed-container"),e.$movableContainer=i.find(".scrtabs-tabs-movable-container"),e.$tabsUl=e.$movableContainer.find(".nav-tabs"),e.$tabsUl.length||(e.$tabsUl=e.$movableContainer.find(".nav-pills"),e.$tabsUl.length&&(e.isNavPills=!0)),e.$tabsLiCollection=e.$tabsUl.find("> li"),e.$leftScrollArrow=i.find(".scrtabs-js-tab-scroll-arrow-left"),e.$rightScrollArrow=i.find(".scrtabs-js-tab-scroll-arrow-right"),e.$scrollArrows=e.$leftScrollArrow.add(e.$rightScrollArrow),e.$win=$(window)},t.setElementWidths=function(){var t=this,e=t.stc;e.containerWidth=e.$tabsContainer.outerWidth(),e.winWidth=e.$win.width(),e.scrollArrowsCombinedWidth=e.$leftScrollArrow.outerWidth()+e.$rightScrollArrow.outerWidth(),t.setFixedContainerWidth(),t.setMovableContainerWidth()},t.setEventListeners=function(){var t=this,e=t.stc,i=e.eventHandlers;e.$leftScrollArrow.off(".scrtabs").on({"mousedown.scrtabs":function(t){i.handleMousedownOnLeftScrollArrow.call(i,t)},"mouseup.scrtabs":function(t){i.handleMouseupOnLeftScrollArrow.call(i,t)},"click.scrtabs":function(t){i.handleClickOnLeftScrollArrow.call(i,t)}}),e.$rightScrollArrow.off(".scrtabs").on({"mousedown.scrtabs":function(t){i.handleMousedownOnRightScrollArrow.call(i,t)},"mouseup.scrtabs":function(t){i.handleMouseupOnRightScrollArrow.call(i,t)},"click.scrtabs":function(t){i.handleClickOnRightScrollArrow.call(i,t)}}),e.$win.smartresize(function(t){i.handleWindowResize.call(i,t)})},t.setFixedContainerWidth=function(){var t=this,e=t.stc;e.$fixedContainer.width(e.fixedContainerWidth=e.$tabsContainer.outerWidth())},t.setFixedContainerWidthForJustHiddenScrollArrows=function(){var t=this,e=t.stc;e.$fixedContainer.width(e.fixedContainerWidth)},t.setFixedContainerWidthForJustVisibleScrollArrows=function(){var t=this,e=t.stc;e.$fixedContainer.width(e.fixedContainerWidth-e.scrollArrowsCombinedWidth)},t.setMovableContainerWidth=function(){var t=this,e=t.stc,i=e.$tabsUl.find("li");e.movableContainerWidth=0,i.length&&(i.each(function(){var i=$(this),n=0;t.isCurrentTabVisible(e.isModalWindow,i)&&(e.isNavPills&&(n=parseInt(i.css("margin-left"),10)+parseInt(i.css("margin-right"),10)),e.movableContainerWidth+=i.outerWidth()+n)}),e.movableContainerWidth+=1,e.movableContainerWidth<e.fixedContainerWidth&&(e.movableContainerWidth=e.fixedContainerWidth)),e.$movableContainer.width(e.movableContainerWidth)},t.setScrollArrowVisibility=function(){var t=this,e=t.stc,i=e.movableContainerWidth>e.fixedContainerWidth;i&&!e.scrollArrowsVisible?(e.$scrollArrows.show(),e.scrollArrowsVisible=!0,t.setFixedContainerWidthForJustVisibleScrollArrows()):!i&&e.scrollArrowsVisible&&(e.$scrollArrows.hide(),e.scrollArrowsVisible=!1,t.setFixedContainerWidthForJustHiddenScrollArrows())}}(o.prototype),function(e){e.continueScrollLeft=function(){var e=this,i=e.stc;i.$timeout(function(){i.$leftScrollArrow.data(t.DATA_KEY_IS_MOUSEDOWN)&&i.movableContainerLeftPos<0&&(e.incrementScrollLeft()||e.continueScrollLeft())},t.CONTINUOUS_SCROLLING_TIMEOUT_INTERVAL)},e.continueScrollRight=function(e){var i=this,n=i.stc;n.$timeout(function(){n.$rightScrollArrow.data(t.DATA_KEY_IS_MOUSEDOWN)&&n.movableContainerLeftPos>e&&(i.incrementScrollRight(e)||i.continueScrollRight(e))},t.CONTINUOUS_SCROLLING_TIMEOUT_INTERVAL)},e.decrementMovableContainerLeftPos=function(e){var i=this,n=i.stc;n.movableContainerLeftPos-=n.fixedContainerWidth/t.SCROLL_OFFSET_FRACTION,n.movableContainerLeftPos<e?n.movableContainerLeftPos=e:n.scrollToTabEdge&&(i.setMovableContainerLeftPosToTabEdge("right"),n.movableContainerLeftPos<e&&(n.movableContainerLeftPos=e))},e.getMinPos=function(){var t=this,e=t.stc;return e.scrollArrowsVisible?e.fixedContainerWidth-e.movableContainerWidth-e.scrollArrowsCombinedWidth:0},e.getMovableContainerCssLeftVal=function(){var t=this,e=t.stc;return 0===e.movableContainerLeftPos?"0":e.movableContainerLeftPos+"px"},e.incrementScrollLeft=function(){var e=this,i=e.stc;return i.movableContainerLeftPos+=i.fixedContainerWidth/t.SCROLL_OFFSET_FRACTION,i.movableContainerLeftPos>0?i.movableContainerLeftPos=0:i.scrollToTabEdge&&(e.setMovableContainerLeftPosToTabEdge("left"),i.movableContainerLeftPos>0&&(i.movableContainerLeftPos=0)),e.slideMovableContainerToLeftPos(),0===i.movableContainerLeftPos},e.incrementScrollRight=function(t){var e=this,i=e.stc;return e.decrementMovableContainerLeftPos(t),e.slideMovableContainerToLeftPos(),i.movableContainerLeftPos===t},e.scrollToActiveTab=function(t){var n,r,o,a,s,e=this,i=e.stc;i.scrollArrowsVisible&&(n=i.$tabsUl.find("li.active"),n.length&&(r=n.outerWidth(),o=n.offset().left,a=i.$rightScrollArrow.offset().left,s=o+r-a,s>0&&(i.movableContainerLeftPos=t.isOnWindowResize||t.isOnTabsRefresh?i.movableContainerLeftPos-s:-s,e.slideMovableContainerToLeftPos())))},e.setMovableContainerLeftPosToTabEdge=function(t){var e=this,i=e.stc,n=-i.movableContainerLeftPos,r=0;i.$tabsLiCollection.each(function(e){var o=$(this).width();return r+=o,r>n?(i.movableContainerLeftPos="left"===t?-(r-o):-r,!1):void 0})},e.slideMovableContainerToLeftPos=function(){var i,t=this,e=t.stc;e.movableContainerLeftPos=e.movableContainerLeftPos/1,i=t.getMovableContainerCssLeftVal(),e.$movableContainer.stop().animate({left:i},"slow",function(){var i=t.getMinPos();e.movableContainerLeftPos<i&&(t.decrementMovableContainerLeftPos(i),e.$movableContainer.stop().animate({left:t.getMovableContainerCssLeftVal()},"fast"))})},e.startScrollLeft=function(){var e=this,i=e.stc;i.$leftScrollArrow.data(t.DATA_KEY_IS_MOUSEDOWN,!0),e.continueScrollLeft()},e.startScrollRight=function(){var e=this,i=e.stc;i.$rightScrollArrow.data(t.DATA_KEY_IS_MOUSEDOWN,!0),e.continueScrollRight(e.getMinPos())},e.stopScrollLeft=function(){var e=this,i=e.stc;i.$leftScrollArrow.data(t.DATA_KEY_IS_MOUSEDOWN,!1)},e.stopScrollRight=function(){var e=this,i=e.stc;i.$rightScrollArrow.data(t.DATA_KEY_IS_MOUSEDOWN,!1)}}(a.prototype),function(t){t.initTabs=function(t){var e=this,i=e.elementsHandler,n=e.scrollMovement;t.scrollToTabEdge&&(e.scrollToTabEdge=!0),e.$timeout(function(){var e;i.initElements(t),e=i.refreshAllElementSizes(),e.didScrollToActiveTab||n.scrollToActiveTab({isOnTabsRefresh:t.isWatchingTabs})},100)},t.removeTranscludedTabContentOutsideMovableContainer=function(){var t=this,e=t.elementsHandler;e.removeTranscludedTabContentOutsideMovableContainer()}}(s.prototype),l.$inject=["$timeout","$sce"],c.$inject=["$timeout"],e.directive("scrollingTabs",l),e.directive("scrollingTabsWrapper",c)}();